{% extends "base.html" %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: {{ query }} - –¢–æ–ª—Å—Ç–æ–π Search{% endblock %}

{% block content %}
<div class="container">
    <div class="search-header">
        <form action="{{ url_for('search') }}" method="get" class="search-form-inline">
            <input type="text" name="q" value="{{ query }}" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å..." required>
            <button type="submit">–ü–æ–∏—Å–∫</button>
        </form>
        <p class="results-count">–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π: {{ results|length }}</p>
    </div>

    {% if results %}
    <div class="results-grid">
        {% for result in results %}
        <div class="result-card">
            <div class="similarity-badge">{{ "%.1f"|format(result.similarity_percent) }}%</div>
            <h3><a href="{{ result.url }}" target="_blank">{{ result.title }}</a></h3>
            <div class="result-meta">
                <span>üìè {{ result.original_length }} —Ç–æ–∫–µ–Ω–æ–≤</span>
                <span>üî¢ {{ result.num_chunks }} —á–∞—Å—Ç–µ–π</span>
            </div>
            <div class="result-actions">
                <a href="{{ result.url }}" target="_blank" class="btn">–ß–∏—Ç–∞—Ç—å</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-results">
        <h2>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h2>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞</p>
    </div>
    {% endif %}
</div>
{% endblock %}